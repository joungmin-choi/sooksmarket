<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>시간 선택</title>


    <!-- Bootstrap core CSS -->
    <link href="/bootstrap-3.3.2-dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.min.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/css/round.css" rel="stylesheet">

    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="/bootstrap-3.3.2-dist/js/bootstrap.min.js"></script>

    <script type="text/javascript">
    var time = new Array();

    function cancle(){
    }

    function showHide(i) {
            $("#collapse" + i).collapse('show');
            for (var j = 0; j < 3; j++) {
                if (j == i) {

                } else {
                    $("#collapse" + j).collapse('hide');
                }
            }
        }

    function disableOther(day, i){
      if(i<=5){
        for(var j=1; j<=5; j++){
          time[j] = document.getElementsByName("time"+day+""+j);
        }
        for(var k=1; k<=5; k++){
          if(k==i){

          }else{
            time[k][0].checked = false;
          }
        }
      }
      else if(i==6){
        var lockerCheck = document.getElementsByName("locker"+day);
        lockerCheck[0].checked = false;
      }else if(i==7){
        var directCheck = document.getElementsByName("direct"+day);
        directCheck[0].checked = false;
      }
    }
    </script>

</head>

<body>
    <% include ./sm_top_navigator %>
        <!-- 바디 달력 창 -->
        <div class="container">

            <h2><strong> 최종 거래 시간 선택 </strong></h2>
            <small>
              구매자가 제시한 날짜와 시간, 거래 장소를 하나만 신중하게 선택해 주세요. 날짜별로 사용자가 제시한 시간과 장소가 다를 수 있습니다.
              <br/>※가능한 시간이 없으시다면 "시간 변경" 버튼을 눌러 가능하신 날짜와 시간을 선택해주세요.
              <br/>※거래를 파기하고 싶으시다면, "거래 파기" 버튼을 눌러주세요.
            </small>
            <hr>

            <form id="eventFrom" method="post" class="form-horizontal" onsubmit="return submitCheck()">
              <label style="font-size:20px;">가능한 날짜 하나 선택</label><br/>
              <small>※선택한 날짜 하나만 최종 거래 시간으로 확정됩니다.</small>

                <div class="panel-group" id="accordion">
                    <% for(var i=0; i<results.length; i++){ %>

                        <div class="panel panel-default">
                            <div class="panel-heading" onclick="showHide(<%=i%>);">
                                <h4 class="panel-title">
                              <a data-toggle="collapse" data-parent="#accordion" href="#collapse<%=i%>">
                                <%= `${results[i].trade_date}` %></a>
                              </h4>
                            </div>

                            <div id="collapse<%=i%>" class="panel-collapse collapse in">
                                <div class="panel-body">

                                        <label>[ 거래 가능한 시간을 선택하세요. ]</label>
                                        <br/>
                                        <% if(results[i].trade_time1 !== null){ %>
                                          <label style="font-weight:normal;">
                                          <input type="checkbox" name="time<%=i%>1" value="<%= `${results[i].trade_time1}` %>" onclick="disableOther(<%=i%>,1);" >
                                          <%= `${results[i].trade_time1}` %>
                                        </label>
                                        <br />
                                        <% } %>

                                        <% if(results[i].trade_time2 !== null){ %>
                                          <label style="font-weight:normal;">
                                          <input type="checkbox" name="time<%=i%>2" value="<%= `${results[i].trade_time2}` %>" onclick="disableOther(<%=i%>,2);">
                                          <%= `${results[i].trade_time2}` %>
                                          </label>
                                        <br />
                                        <% } %>

                                        <% if(results[i].trade_time3 !== null){ %>
                                          <label style="font-weight:normal;">
                                          <input type="checkbox" name="time<%=i%>3" value="<%= `${results[i].trade_time3}` %>" onclick="disableOther(<%=i%>,3);">
                                          <%= `${results[i].trade_time3}` %>
                                        </label>
                                        <br />
                                        <% } %>

                                        <% if(results[i].trade_time4 !== null){ %>
                                          <label style="font-weight:normal;">
                                          <input type="checkbox" name="time<%=i%>4" value="<%= `${results[i].trade_time4}` %>" onclick="disableOther(<%=i%>,4);">
                                          <%= `${results[i].trade_time4}` %>
                                        </label>
                                        <br />
                                        <% } %>

                                        <% if(results[i].trade_time5 !== null){ %>
                                          <label style="font-weight:normal;">
                                          <input type="checkbox" name="time<%=i%>5" value="<%= `${results[i].trade_time5}` %>" onclick="disableOther(<%=i%>,5);">
                                          <%= `${results[i].trade_time5}` %>
                                        </label>
                                        <br />
                                        <% } %>

                                        <br/>
                                        <label>[ 원하는 거래 방법을 선택하세요. ]</label>
                                        <br/>
                                        <% if(results[i].directDetailPlace !== null){ %>
                                          <label style="font-weight:normal;">
                                            <input type="checkbox" name="direct<%=i%>" value="direct" onclick="disableOther(<%=i%>,6);">
                                            직거래 (<%= `${results[i].directPlace}` %>)
                                          </label>
                                            <br/>
                                           : <%= `${results[i].directDetailPlace}` %>
                                        <% } %>

                                        <% if(results[i].lockerDetailPlace !== null){ %>
                                          <br/><br/>
                                          <label style="font-weight:normal;">
                                            <input type="checkbox" name="locker<%=i%>" value="locker" onclick="disableOther(<%=i%>,7);">
                                            사물함거래
                                          </label>
                                          <br/>
                                          - 위치 : <%= `${results[i].lockerDetailPlace}` %><br/>
                                          - 번호 : <%= `${results[i].lockerNum}` %><br/>
                                          <% if(results[i].lockerPw !== null){ %>
                                            - 비번 : <%= `${results[i].lockerPw}` %>
                                            <% } %>
                                          <% } %>


                                </div>
                            </div>

                                <script>
                                    $("#collapse<%=i%>").collapse('hide');
                                </script>

                        </div>

                        <% } %>
                </div>
                <div style="display: none;">
                  날짜 <input type="text" id="finalDate" name="finalDate" value="4">
                </div>
                <hr/>

                <div class="form-group">
                    <div  style="text-align:center;">
                        <button type="submit" class="btn btn-primary">거래 확정</button>
                        <button type="button" class="btn btn-success">시간 변경</button>
                        <button type="button" class="btn btn-danger">거래 파기</button>
                        <button type="button" class="btn btn-default" onclick="cancle();"> 취소</button>
                    </div>
                </div>

            </form>
        </div>


        <hr>
        <!-- 바디 달력 버튼 -->
        <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>

</body>
<!-- Footer -->
<% include ./sm_footer %>

</html>
